{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../cart.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../currentUser.service\";\nimport * as i4 from \"@angular/router\";\nfunction CartComponent_li_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 2)(2, \"span\", 3);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 4);\n    i0.ɵɵlistener(\"click\", function CartComponent_li_3_Template_button_click_5_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const product_r1 = restoredCtx.$implicit;\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.decrease(product_r1.value));\n    });\n    i0.ɵɵtext(6, \"decrease\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function CartComponent_li_3_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const product_r1 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.add(product_r1.value));\n    });\n    i0.ɵɵtext(8, \"increase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function CartComponent_li_3_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r3);\n      const product_r1 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.remove(product_r1.value));\n    });\n    i0.ɵɵtext(10, \"remove\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r1 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/detail/\", product_r1.key, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", product_r1.key, \" : \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate3(\" \", product_r1.value.name, \" : $\", product_r1.value.price, \" : \", product_r1.value.quantity, \" \");\n  }\n}\nexport class CartComponent {\n  constructor(cartService, location, currentUserService) {\n    this.cartService = cartService;\n    this.location = location;\n    this.currentUserService = currentUserService;\n  }\n  ngOnInit() {\n    this.getCart();\n  }\n  getCart() {\n    this.currentUserService.getCurrentUser().subscribe(user => {\n      //if( user.id != 0 ){\n      this.cartService.getCart(user.id).subscribe(cart => {\n        this.cart = cart;\n        this.products = this.cart.products;\n      });\n      //}\n    });\n  }\n\n  goBack() {\n    this.location.back();\n  }\n  decrease(product) {\n    this.cartService.updateProductCount(this.cart.id, product.id, -1).subscribe();\n    this.ngOnInit();\n  }\n  add(product) {\n    this.cartService.updateProductCount(this.cart.id, product.id, 1).subscribe();\n    this.ngOnInit();\n  }\n  remove(product) {\n    this.cartService.updateProductCount(this.cart.id, product.id, -product.quantity).subscribe();\n    this.ngOnInit();\n  }\n}\nCartComponent.ɵfac = function CartComponent_Factory(t) {\n  return new (t || CartComponent)(i0.ɵɵdirectiveInject(i1.CartService), i0.ɵɵdirectiveInject(i2.Location), i0.ɵɵdirectiveInject(i3.CurrentUserService));\n};\nCartComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CartComponent,\n  selectors: [[\"app-product-detail\"]],\n  inputs: {\n    cart: \"cart\",\n    products: \"products\"\n  },\n  decls: 5,\n  vars: 3,\n  consts: [[1, \"products\"], [4, \"ngFor\", \"ngForOf\"], [3, \"routerLink\"], [1, \"badge\"], [\"type\", \"button\", \"title\", \"decrement\", 1, \"delete\", 3, \"click\"], [\"type\", \"button\", \"title\", \"add\", 1, \"add\", 3, \"click\"], [\"type\", \"button\", \"title\", \"remove\", 1, \"remove\", 3, \"click\"]],\n  template: function CartComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"My Cart\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"ul\", 0);\n      i0.ɵɵtemplate(3, CartComponent_li_3_Template, 11, 5, \"li\", 1);\n      i0.ɵɵpipe(4, \"keyvalue\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(4, 1, ctx.products));\n    }\n  },\n  dependencies: [i2.NgForOf, i4.RouterLink, i2.KeyValuePipe],\n  styles: [\".products[_ngcontent-%COMP%] {\\r\\n  margin: 0 0 2em 0;\\r\\n  list-style-type: none;\\r\\n  padding: 0;\\r\\n  width: 15em;\\r\\n}\\r\\n\\r\\ninput[_ngcontent-%COMP%] {\\r\\n  display: block;\\r\\n  width: 100%;\\r\\n  padding: .5rem;\\r\\n  margin: 1rem 0;\\r\\n  box-sizing: border-box;\\r\\n}\\r\\n\\r\\n.products[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\r\\n  position: relative;\\r\\n  cursor: pointer;\\r\\n}\\r\\n\\r\\n.products[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover {\\r\\n  left: .1em;\\r\\n}\\r\\n\\r\\n.products[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\r\\n  color: #333;\\r\\n  text-decoration: none;\\r\\n  background-color: #EEE;\\r\\n  margin: .5em;\\r\\n  padding: .3em 0;\\r\\n  height: 1.6em;\\r\\n  border-radius: 4px;\\r\\n  display: block;\\r\\n  width: 100%;\\r\\n}\\r\\n\\r\\n.products[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\r\\n  color: #2c3a41;\\r\\n  background-color: #e6e6e6;\\r\\n}\\r\\n\\r\\n.products[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active {\\r\\n  background-color: #525252;\\r\\n  color: #fafafa;\\r\\n}\\r\\n\\r\\n.products[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%] {\\r\\n  display: inline-block;\\r\\n  font-size: small;\\r\\n  color: white;\\r\\n  padding: 0.8em 0.7em 0 0.7em;\\r\\n  background-color: #405061;\\r\\n  line-height: 1em;\\r\\n  position: relative;\\r\\n  left: -1px;\\r\\n  top: -4px;\\r\\n  height: 1.8em;\\r\\n  min-width: 16px;\\r\\n  text-align: right;\\r\\n  margin-right: .8em;\\r\\n  border-radius: 4px 0 0 4px;\\r\\n}\\r\\n\\r\\nbutton.delete[_ngcontent-%COMP%] {\\r\\n  position: relative;\\r\\n  left: 210px;\\r\\n  top: 5px;\\r\\n  background-color: white;\\r\\n  color:  #525252;\\r\\n  font-size: 1.1rem;\\r\\n  margin: 0;\\r\\n  padding: 1px 10px 3px 10px;\\r\\n}\\r\\n\\r\\nbutton.delete[_ngcontent-%COMP%]:hover {\\r\\n  background-color: #525252;\\r\\n  color: white;\\r\\n}\\r\\n\\r\\nbutton.add[_ngcontent-%COMP%] {\\r\\n  position: relative;\\r\\n  left: 210px;\\r\\n  top: 5px;\\r\\n  background-color: white;\\r\\n  color:  #525252;\\r\\n  font-size: 1.1rem;\\r\\n  margin: 0;\\r\\n  padding: 1px 10px 3px 10px;\\r\\n}\\r\\n\\r\\nbutton.add[_ngcontent-%COMP%]:hover {\\r\\n  background-color: #525252;\\r\\n  color: white;\\r\\n}\\r\\n\\r\\nbutton.remove[_ngcontent-%COMP%] {\\r\\n  position: relative;\\r\\n  left: 210px;\\r\\n  top: 5px;\\r\\n  background-color: white;\\r\\n  color:  #525252;\\r\\n  font-size: 1.1rem;\\r\\n  margin: 0;\\r\\n  padding: 1px 10px 3px 10px;\\r\\n}\\r\\n\\r\\nbutton.remove[_ngcontent-%COMP%]:hover {\\r\\n  background-color: #525252;\\r\\n  color: white;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY2FydC9jYXJ0LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsMkNBQTJDO0FBQzNDO0VBQ0UsaUJBQWlCO0VBQ2pCLHFCQUFxQjtFQUNyQixVQUFVO0VBQ1YsV0FBVztBQUNiOztBQUVBO0VBQ0UsY0FBYztFQUNkLFdBQVc7RUFDWCxjQUFjO0VBQ2QsY0FBYztFQUNkLHNCQUFzQjtBQUN4Qjs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixlQUFlO0FBQ2pCOztBQUVBO0VBQ0UsVUFBVTtBQUNaOztBQUVBO0VBQ0UsV0FBVztFQUNYLHFCQUFxQjtFQUNyQixzQkFBc0I7RUFDdEIsWUFBWTtFQUNaLGVBQWU7RUFDZixhQUFhO0VBQ2Isa0JBQWtCO0VBQ2xCLGNBQWM7RUFDZCxXQUFXO0FBQ2I7O0FBRUE7RUFDRSxjQUFjO0VBQ2QseUJBQXlCO0FBQzNCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSxxQkFBcUI7RUFDckIsZ0JBQWdCO0VBQ2hCLFlBQVk7RUFDWiw0QkFBNEI7RUFDNUIseUJBQXlCO0VBQ3pCLGdCQUFnQjtFQUNoQixrQkFBa0I7RUFDbEIsVUFBVTtFQUNWLFNBQVM7RUFDVCxhQUFhO0VBQ2IsZUFBZTtFQUNmLGlCQUFpQjtFQUNqQixrQkFBa0I7RUFDbEIsMEJBQTBCO0FBQzVCOztBQUVBO0VBQ0Usa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxRQUFRO0VBQ1IsdUJBQXVCO0VBQ3ZCLGVBQWU7RUFDZixpQkFBaUI7RUFDakIsU0FBUztFQUNULDBCQUEwQjtBQUM1Qjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLFFBQVE7RUFDUix1QkFBdUI7RUFDdkIsZUFBZTtFQUNmLGlCQUFpQjtFQUNqQixTQUFTO0VBQ1QsMEJBQTBCO0FBQzVCOztBQUVBO0VBQ0UseUJBQXlCO0VBQ3pCLFlBQVk7QUFDZDs7QUFFQTtFQUNFLGtCQUFrQjtFQUNsQixXQUFXO0VBQ1gsUUFBUTtFQUNSLHVCQUF1QjtFQUN2QixlQUFlO0VBQ2YsaUJBQWlCO0VBQ2pCLFNBQVM7RUFDVCwwQkFBMEI7QUFDNUI7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsWUFBWTtBQUNkIiwic291cmNlc0NvbnRlbnQiOlsiLyogUHJvZHVjdHNDb21wb25lbnQncyBwcml2YXRlIENTUyBzdHlsZXMgKi9cclxuLnByb2R1Y3RzIHtcclxuICBtYXJnaW46IDAgMCAyZW0gMDtcclxuICBsaXN0LXN0eWxlLXR5cGU6IG5vbmU7XHJcbiAgcGFkZGluZzogMDtcclxuICB3aWR0aDogMTVlbTtcclxufVxyXG5cclxuaW5wdXQge1xyXG4gIGRpc3BsYXk6IGJsb2NrO1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIHBhZGRpbmc6IC41cmVtO1xyXG4gIG1hcmdpbjogMXJlbSAwO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbn1cclxuXHJcbi5wcm9kdWN0cyBsaSB7XHJcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gIGN1cnNvcjogcG9pbnRlcjtcclxufVxyXG5cclxuLnByb2R1Y3RzIGxpOmhvdmVyIHtcclxuICBsZWZ0OiAuMWVtO1xyXG59XHJcblxyXG4ucHJvZHVjdHMgYSB7XHJcbiAgY29sb3I6ICMzMzM7XHJcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNFRUU7XHJcbiAgbWFyZ2luOiAuNWVtO1xyXG4gIHBhZGRpbmc6IC4zZW0gMDtcclxuICBoZWlnaHQ6IDEuNmVtO1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICBkaXNwbGF5OiBibG9jaztcclxuICB3aWR0aDogMTAwJTtcclxufVxyXG5cclxuLnByb2R1Y3RzIGE6aG92ZXIge1xyXG4gIGNvbG9yOiAjMmMzYTQxO1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICNlNmU2ZTY7XHJcbn1cclxuXHJcbi5wcm9kdWN0cyBhOmFjdGl2ZSB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzUyNTI1MjtcclxuICBjb2xvcjogI2ZhZmFmYTtcclxufVxyXG5cclxuLnByb2R1Y3RzIC5iYWRnZSB7XHJcbiAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gIGZvbnQtc2l6ZTogc21hbGw7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG4gIHBhZGRpbmc6IDAuOGVtIDAuN2VtIDAgMC43ZW07XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzQwNTA2MTtcclxuICBsaW5lLWhlaWdodDogMWVtO1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICBsZWZ0OiAtMXB4O1xyXG4gIHRvcDogLTRweDtcclxuICBoZWlnaHQ6IDEuOGVtO1xyXG4gIG1pbi13aWR0aDogMTZweDtcclxuICB0ZXh0LWFsaWduOiByaWdodDtcclxuICBtYXJnaW4tcmlnaHQ6IC44ZW07XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4IDAgMCA0cHg7XHJcbn1cclxuXHJcbmJ1dHRvbi5kZWxldGUge1xyXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICBsZWZ0OiAyMTBweDtcclxuICB0b3A6IDVweDtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICBjb2xvcjogICM1MjUyNTI7XHJcbiAgZm9udC1zaXplOiAxLjFyZW07XHJcbiAgbWFyZ2luOiAwO1xyXG4gIHBhZGRpbmc6IDFweCAxMHB4IDNweCAxMHB4O1xyXG59XHJcblxyXG5idXR0b24uZGVsZXRlOmhvdmVyIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTI1MjUyO1xyXG4gIGNvbG9yOiB3aGl0ZTtcclxufVxyXG5cclxuYnV0dG9uLmFkZCB7XHJcbiAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gIGxlZnQ6IDIxMHB4O1xyXG4gIHRvcDogNXB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gIGNvbG9yOiAgIzUyNTI1MjtcclxuICBmb250LXNpemU6IDEuMXJlbTtcclxuICBtYXJnaW46IDA7XHJcbiAgcGFkZGluZzogMXB4IDEwcHggM3B4IDEwcHg7XHJcbn1cclxuXHJcbmJ1dHRvbi5hZGQ6aG92ZXIge1xyXG4gIGJhY2tncm91bmQtY29sb3I6ICM1MjUyNTI7XHJcbiAgY29sb3I6IHdoaXRlO1xyXG59XHJcblxyXG5idXR0b24ucmVtb3ZlIHtcclxuICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgbGVmdDogMjEwcHg7XHJcbiAgdG9wOiA1cHg7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogd2hpdGU7XHJcbiAgY29sb3I6ICAjNTI1MjUyO1xyXG4gIGZvbnQtc2l6ZTogMS4xcmVtO1xyXG4gIG1hcmdpbjogMDtcclxuICBwYWRkaW5nOiAxcHggMTBweCAzcHggMTBweDtcclxufVxyXG5cclxuYnV0dG9uLnJlbW92ZTpob3ZlciB7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogIzUyNTI1MjtcclxuICBjb2xvcjogd2hpdGU7XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":";;;;;;;;IAEEA,0BAAgD;IAExBA,YAAkB;IAAAA,iBAAO;IAACA,YAChD;IAAAA,iBAAI;IACJA,iCACkC;IAAlCA;MAAA;MAAA;MAAA;MAAA,OAASA,gDAAuB;IAAA,EAAC;IAACA,wBAAQ;IAAAA,iBAAS;IACnDA,iCAC6B;IAA7BA;MAAA;MAAA;MAAA;MAAA,OAASA,2CAAkB;IAAA,EAAC;IAACA,wBAAQ;IAAAA,iBAAS;IAC9CA,iCACgC;IAAhCA;MAAA;MAAA;MAAA;MAAA,OAASA,8CAAqB;IAAA,EAAC;IAACA,uBAAM;IAAAA,iBAAS;;;;IAR5CA,eAAoC;IAApCA,uEAAoC;IACjBA,eAAkB;IAAlBA,gDAAkB;IAAQA,eAChD;IADgDA,wHAChD;;;ACUJ,OAAM,MAAOC,aAAa;EAMtBC,YACYC,WAAwB,EACxBC,QAAkB,EAClBC,kBAAsC;IAFtC,gBAAW,GAAXF,WAAW;IACX,aAAQ,GAARC,QAAQ;IACR,uBAAkB,GAAlBC,kBAAkB;EACzB;EAELC,QAAQ;IACJ,IAAI,CAACC,OAAO,EAAE;EAClB;EAEAA,OAAO;IACL,IAAI,CAACF,kBAAkB,CAACG,cAAc,EAAE,CAACC,SAAS,CAAEC,IAAI,IAAI;MAC1D;MACE,IAAI,CAACP,WAAW,CAACI,OAAO,CAACG,IAAI,CAACC,EAAE,CAAC,CAACF,SAAS,CAAEG,IAAI,IAAG;QAClD,IAAI,CAACA,IAAI,GAAGA,IAAI;QAChB,IAAI,CAACC,QAAQ,GAAG,IAAI,CAACD,IAAI,CAACC,QAAQ;MACpC,CAAC,CAAE;MACL;IACF,CAAC,CAAC;EACJ;;EAEAC,MAAM;IACF,IAAI,CAACV,QAAQ,CAACW,IAAI,EAAE;EACxB;EAEAC,QAAQ,CAACC,OAAgB;IACvB,IAAI,CAACd,WAAW,CAACe,kBAAkB,CAAC,IAAI,CAACN,IAAI,CAACD,EAAE,EAAEM,OAAO,CAACN,EAAE,EAAE,CAAC,CAAC,CAAC,CAACF,SAAS,EAAE;IAC7E,IAAI,CAACH,QAAQ,EAAE;EACnB;EAEEa,GAAG,CAACF,OAAgB;IAClB,IAAI,CAACd,WAAW,CAACe,kBAAkB,CAAC,IAAI,CAACN,IAAI,CAACD,EAAE,EAAEM,OAAO,CAACN,EAAE,EAAE,CAAC,CAAC,CAACF,SAAS,EAAE;IAC5E,IAAI,CAACH,QAAQ,EAAE;EACnB;EAEEc,MAAM,CAACH,OAAgB;IACrB,IAAI,CAACd,WAAW,CAACe,kBAAkB,CAAC,IAAI,CAACN,IAAI,CAACD,EAAE,EAAEM,OAAO,CAACN,EAAE,EAAE,CAACM,OAAO,CAACI,QAAQ,CAAC,CAACZ,SAAS,EAAE;IAC5F,IAAI,CAACH,QAAQ,EAAE;EACnB;;AA5CWL,aAAa;mBAAbA,aAAa;AAAA;AAAbA,aAAa;QAAbA,aAAa;EAAAqB;EAAAC;IAAAX;IAAAC;EAAA;EAAAW;EAAAC;EAAAC;EAAAC;IAAA;MDf1B3B,0BAAI;MAAAA,uBAAO;MAAAA,iBAAK;MAChBA,6BAAqB;MACnBA,6DAUK;;MACPA,iBAAK;;;MAXqBA,eAAsB;MAAtBA,4DAAsB","names":["i0","CartComponent","constructor","cartService","location","currentUserService","ngOnInit","getCart","getCurrentUser","subscribe","user","id","cart","products","goBack","back","decrease","product","updateProductCount","add","remove","quantity","selectors","inputs","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\broke\\Desktop\\SWEN-261\\team-project-2225-swen-261-06-g-ritgaragesale\\estore-ui\\src\\app\\cart\\cart.component.html","C:\\Users\\broke\\Desktop\\SWEN-261\\team-project-2225-swen-261-06-g-ritgaragesale\\estore-ui\\src\\app\\cart\\cart.component.ts"],"sourcesContent":["<h2>My Cart</h2>\r\n<ul class=\"products\">\r\n  <li *ngFor=\"let product of products | keyvalue\">\r\n    <a routerLink=\"/detail/{{product.key}}\">\r\n      <span class=\"badge\">{{product.key}} : </span> {{product.value.name}} : ${{product.value.price}} : {{product.value.quantity}}\r\n    </a>\r\n    <button type=\"button\" class=\"delete\" title=\"decrement\"\r\n    (click)=\"decrease(product.value)\">decrease</button>\r\n    <button type=\"button\" class=\"add\" title=\"add\"\r\n    (click)=\"add(product.value)\">increase</button>\r\n    <button type=\"button\" class=\"remove\" title=\"remove\"\r\n    (click)=\"remove(product.value)\">remove</button>\r\n  </li>\r\n</ul>","import { ChangeDetectorRef, Component, Input, OnInit } from '@angular/core';\r\nimport { Cart } from '../cart';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Location } from '@angular/common';\r\nimport { CartService } from '../cart.service';\r\nimport { CurrentUserService } from '../currentUser.service';\r\nimport { switchMap } from 'rxjs';\r\nimport { Product } from '../product';\r\nimport { tick } from '@angular/core/testing';\r\n\r\n@Component({\r\n  selector: 'app-product-detail',\r\n  templateUrl: './cart.component.html',\r\n  styleUrls: ['./cart.component.css']\r\n})\r\nexport class CartComponent implements OnInit {\r\n    @Input()\r\n  cart!: Cart;\r\n    @Input()\r\n  products!: Map<number, Product>;\r\n\r\n    constructor(\r\n        private cartService: CartService,\r\n        private location: Location,\r\n        private currentUserService: CurrentUserService,\r\n      ) {}\r\n\r\n    ngOnInit(): void {\r\n        this.getCart();\r\n    }\r\n      \r\n    getCart(): void {\r\n      this.currentUserService.getCurrentUser().subscribe((user) => {\r\n        //if( user.id != 0 ){\r\n          this.cartService.getCart(user.id).subscribe((cart => {\r\n            this.cart = cart;\r\n            this.products = this.cart.products;\r\n          }))\r\n        //}\r\n      });\r\n    }\r\n\r\n    goBack(): void {\r\n        this.location.back();\r\n    }\r\n\r\n    decrease(product: Product): void {\r\n      this.cartService.updateProductCount(this.cart.id, product.id, -1).subscribe();\r\n      this.ngOnInit();\r\n  }\r\n\r\n    add(product: Product): void {\r\n      this.cartService.updateProductCount(this.cart.id, product.id, 1).subscribe();\r\n      this.ngOnInit();\r\n  }\r\n\r\n    remove(product: Product): void {\r\n      this.cartService.updateProductCount(this.cart.id, product.id, -product.quantity).subscribe();\r\n      this.ngOnInit();\r\n  }\r\n\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}