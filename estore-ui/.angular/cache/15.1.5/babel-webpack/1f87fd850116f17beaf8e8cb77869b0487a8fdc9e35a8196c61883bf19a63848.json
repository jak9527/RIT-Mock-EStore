{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../product.service\";\nimport * as i3 from \"../currentUser.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../cart.service\";\nimport * as i6 from \"@angular/forms\";\nfunction ProductDetailComponent_div_0_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"span\");\n    i0.ɵɵtext(2, \"id: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.product.id);\n  }\n}\nfunction ProductDetailComponent_div_0_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\")(2, \"span\");\n    i0.ɵɵtext(3, \"Product Name: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\")(6, \"span\");\n    i0.ɵɵtext(7, \"Product Price: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\")(10, \"span\");\n    i0.ɵɵtext(11, \"Number Available \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r3.product.name, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r3.product.price, \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r3.product.quantity, \" \");\n  }\n}\nfunction ProductDetailComponent_div_0_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\")(2, \"label\", 4);\n    i0.ɵɵtext(3, \"Product name: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"input\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetailComponent_div_0_div_6_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.product.name = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"div\")(6, \"label\", 6);\n    i0.ɵɵtext(7, \"Product price: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"input\", 7);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetailComponent_div_0_div_6_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.product.price = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\")(10, \"label\", 8);\n    i0.ɵɵtext(11, \"Product quantity: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"input\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetailComponent_div_0_div_6_Template_input_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.product.quantity = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r4.product.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r4.product.price);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngModel\", ctx_r4.product.quantity);\n  }\n}\nfunction ProductDetailComponent_div_0_button_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_div_0_button_7_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.addToCart(ctx_r10.product));\n    });\n    i0.ɵɵtext(1, \"add to cart\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductDetailComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"uppercase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, ProductDetailComponent_div_0_div_4_Template, 4, 1, \"div\", 0);\n    i0.ɵɵtemplate(5, ProductDetailComponent_div_0_div_5_Template, 13, 3, \"div\", 0);\n    i0.ɵɵtemplate(6, ProductDetailComponent_div_0_div_6_Template, 13, 3, \"div\", 0);\n    i0.ɵɵtemplate(7, ProductDetailComponent_div_0_button_7_Template, 2, 0, \"button\", 3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(3, 5, ctx_r0.product.name), \" Details\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isAdmin);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isAdmin);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isAdmin);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isAdmin);\n  }\n}\nfunction ProductDetailComponent_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 1);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_button_3_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.save());\n    });\n    i0.ɵɵtext(1, \"save\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport class ProductDetailComponent {\n  constructor(route, productService, currentUserService, location, cartService) {\n    this.route = route;\n    this.productService = productService;\n    this.currentUserService = currentUserService;\n    this.location = location;\n    this.cartService = cartService;\n    this.isAdmin = false;\n  }\n  ngOnInit() {\n    this.getProduct();\n    var theUser = null;\n    this.currentUserService.getCurrentUser().subscribe(curUser => {\n      theUser = curUser;\n      if (theUser.id == 0) {\n        this.isAdmin = true;\n      } else {\n        this.isAdmin = false;\n      }\n    });\n  }\n  getProduct() {\n    const id = Number(this.route.snapshot.paramMap.get('id'));\n    this.productService.getProduct(id).subscribe(product => this.product = product);\n  }\n  goBack() {\n    this.location.back();\n  }\n  addToCart(product) {\n    this.currentUserService.getCurrentUser().subscribe(user => {\n      this.cartService.addProductToCart(user.id, product).subscribe();\n      this.ngOnInit();\n    });\n  }\n  save() {\n    if (this.product) {\n      this.productService.updateProduct(this.product).subscribe(() => this.goBack());\n    }\n  }\n}\nProductDetailComponent.ɵfac = function ProductDetailComponent_Factory(t) {\n  return new (t || ProductDetailComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.CurrentUserService), i0.ɵɵdirectiveInject(i4.Location), i0.ɵɵdirectiveInject(i5.CartService));\n};\nProductDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductDetailComponent,\n  selectors: [[\"app-product-detail\"]],\n  inputs: {\n    product: \"product\"\n  },\n  decls: 4,\n  vars: 2,\n  consts: [[4, \"ngIf\"], [\"type\", \"button\", 3, \"click\"], [\"type\", \"button\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"add\", \"title\", \"add to cart\", 3, \"click\", 4, \"ngIf\"], [\"for\", \"product-name\"], [\"id\", \"product-name\", \"placeholder\", \"name\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"product-price\"], [\"id\", \"product-price\", \"placeholder\", \"price\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"product-quantity\"], [\"id\", \"product-quantity\", \"placeholder\", \"quantity\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", \"title\", \"add to cart\", 1, \"add\", 3, \"click\"]],\n  template: function ProductDetailComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProductDetailComponent_div_0_Template, 8, 7, \"div\", 0);\n      i0.ɵɵelementStart(1, \"button\", 1);\n      i0.ɵɵlistener(\"click\", function ProductDetailComponent_Template_button_click_1_listener() {\n        return ctx.goBack();\n      });\n      i0.ɵɵtext(2, \"go back\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, ProductDetailComponent_button_3_Template, 2, 0, \"button\", 2);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.product);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.isAdmin);\n    }\n  },\n  dependencies: [i4.NgIf, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgModel, i4.UpperCasePipe],\n  styles: [\"label[_ngcontent-%COMP%] {\\r\\n    color: #435960;\\r\\n    font-weight: bold;\\r\\n  }\\r\\n  input[_ngcontent-%COMP%] {\\r\\n    font-size: 1em;\\r\\n    padding: .5rem;\\r\\n  }\\r\\n  button[_ngcontent-%COMP%] {\\r\\n    margin-top: 20px;\\r\\n    margin-right: .5rem;\\r\\n    background-color: #eee;\\r\\n    padding: 1rem;\\r\\n    border-radius: 4px;\\r\\n    font-size: 1rem;\\r\\n  }\\r\\n  button[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #cfd8dc;\\r\\n  }\\r\\n  button[_ngcontent-%COMP%]:disabled {\\r\\n    background-color: #eee;\\r\\n    color: #ccc;\\r\\n    cursor: auto;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJvZHVjdC1kZXRhaWwvcHJvZHVjdC1kZXRhaWwuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnREFBZ0Q7QUFDaEQ7SUFDSSxjQUFjO0lBQ2QsaUJBQWlCO0VBQ25CO0VBQ0E7SUFDRSxjQUFjO0lBQ2QsY0FBYztFQUNoQjtFQUNBO0lBQ0UsZ0JBQWdCO0lBQ2hCLG1CQUFtQjtJQUNuQixzQkFBc0I7SUFDdEIsYUFBYTtJQUNiLGtCQUFrQjtJQUNsQixlQUFlO0VBQ2pCO0VBQ0E7SUFDRSx5QkFBeUI7RUFDM0I7RUFDQTtJQUNFLHNCQUFzQjtJQUN0QixXQUFXO0lBQ1gsWUFBWTtFQUNkIiwic291cmNlc0NvbnRlbnQiOlsiLyogUHJvZHVjdERldGFpbENvbXBvbmVudCdzIHByaXZhdGUgQ1NTIHN0eWxlcyAqL1xyXG5sYWJlbCB7XHJcbiAgICBjb2xvcjogIzQzNTk2MDtcclxuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG4gIH1cclxuICBpbnB1dCB7XHJcbiAgICBmb250LXNpemU6IDFlbTtcclxuICAgIHBhZGRpbmc6IC41cmVtO1xyXG4gIH1cclxuICBidXR0b24ge1xyXG4gICAgbWFyZ2luLXRvcDogMjBweDtcclxuICAgIG1hcmdpbi1yaWdodDogLjVyZW07XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO1xyXG4gICAgcGFkZGluZzogMXJlbTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgIGZvbnQtc2l6ZTogMXJlbTtcclxuICB9XHJcbiAgYnV0dG9uOmhvdmVyIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNjZmQ4ZGM7XHJcbiAgfVxyXG4gIGJ1dHRvbjpkaXNhYmxlZCB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO1xyXG4gICAgY29sb3I6ICNjY2M7XHJcbiAgICBjdXJzb3I6IGF1dG87XHJcbiAgfSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ProductDetailComponent","constructor","route","productService","currentUserService","location","cartService","ngOnInit","getProduct","theUser","getCurrentUser","subscribe","curUser","id","isAdmin","Number","snapshot","paramMap","get","product","goBack","back","addToCart","user","addProductToCart","save","updateProduct","selectors","inputs","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\broke\\Desktop\\SWEN-261\\team-project-2225-swen-261-06-g-ritgaragesale\\estore-ui\\src\\app\\product-detail\\product-detail.component.html","C:\\Users\\broke\\Desktop\\SWEN-261\\team-project-2225-swen-261-06-g-ritgaragesale\\estore-ui\\src\\app\\product-detail\\product-detail.component.ts"],"sourcesContent":["<div *ngIf=\"product\">\r\n\r\n    <h2>{{product.name | uppercase}} Details</h2>\r\n    <div *ngIf=\"isAdmin\"><span>id: </span>{{product.id}}</div>\r\n    <div *ngIf=\"!isAdmin\"> \r\n        <div>\r\n            <span>Product Name: </span>{{product.name}}\r\n        </div>\r\n        <div>\r\n            <span>Product Price: </span>{{product.price}}\r\n        </div>\r\n        <div>\r\n            <span>Number Available </span>{{product.quantity}}\r\n        </div>\r\n    </div>\r\n    <div *ngIf=\"isAdmin\">\r\n        <div>\r\n        <label for=\"product-name\">Product name: </label>\r\n        <input id=\"product-name\" [(ngModel)]=\"product.name\" placeholder=\"name\">\r\n        </div>\r\n        <div>\r\n            <label for=\"product-price\">Product price: </label>\r\n            <input id=\"product-price\" [(ngModel)]=\"product.price\" placeholder=\"price\">\r\n        </div>\r\n        <div>\r\n            <label for=\"product-quantity\">Product quantity: </label>\r\n            <input id=\"product-quantity\" [(ngModel)]=\"product.quantity\" placeholder=\"quantity\">\r\n        </div>\r\n    </div>\r\n\r\n    <button *ngIf=\"!isAdmin\" type=\"button\" class=\"add\" title=\"add to cart\"\r\n    (click)=\"addToCart(product)\">add to cart</button>\r\n    </div>\r\n\r\n    <button type=\"button\" (click)=\"goBack()\">go back</button>\r\n\r\n    <button *ngIf=\"isAdmin\" type=\"button\" (click)=\"save()\">save</button>","import { Component, Input } from '@angular/core';\r\nimport { Product } from '../product';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Location } from '@angular/common';\r\nimport { ProductService } from '../product.service';\r\nimport { CurrentUserService } from '../currentUser.service';\r\nimport { User } from '../user';\r\nimport { CartService } from '../cart.service';\r\n\r\n@Component({\r\n  selector: 'app-product-detail',\r\n  templateUrl: './product-detail.component.html',\r\n  styleUrls: ['./product-detail.component.css']\r\n})\r\nexport class ProductDetailComponent {\r\n    @Input() product?: Product;\r\n    isAdmin: boolean = false;\r\n\r\n    constructor(\r\n        private route: ActivatedRoute,\r\n        private productService: ProductService,\r\n        private currentUserService: CurrentUserService,\r\n        private location: Location,\r\n        private cartService: CartService\r\n      ) {}\r\n\r\n    ngOnInit(): void {\r\n        this.getProduct();\r\n        var theUser: User = null as unknown as User;\r\n        this.currentUserService.getCurrentUser().subscribe(curUser =>{\r\n            theUser = curUser;\r\n            if (theUser.id == 0){\r\n                this.isAdmin = true;\r\n            } else {\r\n                this.isAdmin = false;\r\n            }\r\n        });\r\n    }\r\n      \r\n    getProduct(): void {\r\n        const id = Number(this.route.snapshot.paramMap.get('id'));\r\n        this.productService.getProduct(id)\r\n          .subscribe(product => this.product = product);\r\n    }\r\n\r\n    goBack(): void {\r\n        this.location.back();\r\n    }\r\n\r\n    addToCart(product: Product): void {\r\n      this.currentUserService.getCurrentUser().subscribe((user) => {\r\n            this.cartService.addProductToCart(user.id,product).subscribe();\r\n            this.ngOnInit();\r\n      });\r\n  }\r\n\r\n    save(): void {\r\n        if (this.product) {\r\n          this.productService.updateProduct(this.product)\r\n            .subscribe(() => this.goBack());\r\n        }\r\n      }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}