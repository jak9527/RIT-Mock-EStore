{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../product.service\";\nimport * as i2 from \"../cart.service\";\nimport * as i3 from \"../currentUser.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nfunction ProductsComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 3);\n    i0.ɵɵtext(2, \"Product name: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 4, 5);\n    i0.ɵɵelementStart(5, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_div_2_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const _r2 = i0.ɵɵreference(4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      ctx_r3.add(_r2.value);\n      return i0.ɵɵresetView(_r2.value = \"\");\n    });\n    i0.ɵɵtext(6, \" Add product \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductsComponent_li_4_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 11);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_li_4_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const product_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.delete(product_r5));\n    });\n    i0.ɵɵtext(1, \"x\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductsComponent_li_4_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_li_4_button_6_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const product_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.addToCart(product_r5));\n    });\n    i0.ɵɵtext(1, \"add to cart\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProductsComponent_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 7)(2, \"span\", 8);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, ProductsComponent_li_4_button_5_Template, 2, 0, \"button\", 9);\n    i0.ɵɵtemplate(6, ProductsComponent_li_4_button_6_Template, 2, 0, \"button\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const product_r5 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/detail/\", product_r5.id, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r5.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", product_r5.name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.isAdmin);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.isAdmin);\n  }\n}\nexport class ProductsComponent {\n  constructor(productService, cartService, currentUserService) {\n    this.productService = productService;\n    this.cartService = cartService;\n    this.currentUserService = currentUserService;\n    this.products = [];\n    this.isAdmin = false;\n  }\n  ngOnInit() {\n    this.getProducts();\n    var theUser = null;\n    this.currentUserService.getCurrentUser().subscribe(curUser => {\n      theUser = curUser;\n      if (theUser.id == 0) {\n        this.isAdmin = true;\n      } else {\n        this.isAdmin = false;\n      }\n    });\n  }\n  getProducts() {\n    this.productService.getProducts().subscribe(products => this.products = products);\n  }\n  addToCart(product) {\n    this.currentUserService.getCurrentUser().subscribe(user => {\n      this.cartService.addProductToCart(user.id, product).subscribe();\n      this.ngOnInit();\n    });\n  }\n  add(name) {\n    name = name.trim();\n    if (!name) {\n      return;\n    }\n    this.productService.addProduct({\n      name\n    }).subscribe(product => {\n      this.products.push(product);\n    });\n  }\n  delete(product) {\n    this.products = this.products.filter(h => h !== product);\n    this.productService.deleteProduct(product.id).subscribe();\n  }\n}\nProductsComponent.ɵfac = function ProductsComponent_Factory(t) {\n  return new (t || ProductsComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.CartService), i0.ɵɵdirectiveInject(i3.CurrentUserService));\n};\nProductsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductsComponent,\n  selectors: [[\"app-products\"]],\n  decls: 5,\n  vars: 2,\n  consts: [[4, \"ngIf\"], [1, \"products\"], [4, \"ngFor\", \"ngForOf\"], [\"for\", \"new-product\"], [\"id\", \"new-product\"], [\"productName\", \"\"], [\"type\", \"button\", 1, \"add-button\", 3, \"click\"], [3, \"routerLink\"], [1, \"badge\"], [\"type\", \"button\", \"class\", \"delete\", \"title\", \"delete product\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"add\", \"title\", \"add to cart\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"title\", \"delete product\", 1, \"delete\", 3, \"click\"], [\"type\", \"button\", \"title\", \"add to cart\", 1, \"add\", 3, \"click\"]],\n  template: function ProductsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"My Products\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, ProductsComponent_div_2_Template, 7, 0, \"div\", 0);\n      i0.ɵɵelementStart(3, \"ul\", 1);\n      i0.ɵɵtemplate(4, ProductsComponent_li_4_Template, 7, 5, \"li\", 2);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isAdmin);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.RouterLink],\n  styles: [\".products[_ngcontent-%COMP%] {\\r\\n    margin: 0 0 2em 0;\\r\\n    list-style-type: none;\\r\\n    padding: 0;\\r\\n    width: 15em;\\r\\n  }\\r\\n  \\r\\n  input[_ngcontent-%COMP%] {\\r\\n    display: block;\\r\\n    width: 100%;\\r\\n    padding: .5rem;\\r\\n    margin: 1rem 0;\\r\\n    box-sizing: border-box;\\r\\n  }\\r\\n  \\r\\n  .products[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\r\\n    position: relative;\\r\\n    cursor: pointer;\\r\\n  }\\r\\n  \\r\\n  .products[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover {\\r\\n    left: .1em;\\r\\n  }\\r\\n  \\r\\n  .products[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\r\\n    color: #333;\\r\\n    text-decoration: none;\\r\\n    background-color: #EEE;\\r\\n    margin: .5em;\\r\\n    padding: .3em 0;\\r\\n    height: 1.6em;\\r\\n    border-radius: 4px;\\r\\n    display: block;\\r\\n    width: 100%;\\r\\n  }\\r\\n  \\r\\n  .products[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\r\\n    color: #2c3a41;\\r\\n    background-color: #e6e6e6;\\r\\n  }\\r\\n  \\r\\n  .products[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active {\\r\\n    background-color: #525252;\\r\\n    color: #fafafa;\\r\\n  }\\r\\n  \\r\\n  .products[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%] {\\r\\n    display: inline-block;\\r\\n    font-size: small;\\r\\n    color: white;\\r\\n    padding: 0.8em 0.7em 0 0.7em;\\r\\n    background-color: #405061;\\r\\n    line-height: 1em;\\r\\n    position: relative;\\r\\n    left: -1px;\\r\\n    top: -4px;\\r\\n    height: 1.8em;\\r\\n    min-width: 16px;\\r\\n    text-align: right;\\r\\n    margin-right: .8em;\\r\\n    border-radius: 4px 0 0 4px;\\r\\n  }\\r\\n  \\r\\n  .add-button[_ngcontent-%COMP%] {\\r\\n   padding: .5rem 1.5rem;\\r\\n   font-size: 1rem;\\r\\n   margin-bottom: 2rem;\\r\\n  }\\r\\n  \\r\\n  .add-button[_ngcontent-%COMP%]:hover {\\r\\n    color: white;\\r\\n    background-color: #42545C;\\r\\n  }\\r\\n  \\r\\n  button.delete[_ngcontent-%COMP%] {\\r\\n    position: absolute;\\r\\n    left: 210px;\\r\\n    top: 5px;\\r\\n    background-color: white;\\r\\n    color:  #525252;\\r\\n    font-size: 1.1rem;\\r\\n    margin: 0;\\r\\n    padding: 1px 10px 3px 10px;\\r\\n  }\\r\\n  \\r\\n  button.delete[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #525252;\\r\\n    color: white;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJvZHVjdHMvcHJvZHVjdHMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSwyQ0FBMkM7QUFDM0M7SUFDSSxpQkFBaUI7SUFDakIscUJBQXFCO0lBQ3JCLFVBQVU7SUFDVixXQUFXO0VBQ2I7O0VBRUE7SUFDRSxjQUFjO0lBQ2QsV0FBVztJQUNYLGNBQWM7SUFDZCxjQUFjO0lBQ2Qsc0JBQXNCO0VBQ3hCOztFQUVBO0lBQ0Usa0JBQWtCO0lBQ2xCLGVBQWU7RUFDakI7O0VBRUE7SUFDRSxVQUFVO0VBQ1o7O0VBRUE7SUFDRSxXQUFXO0lBQ1gscUJBQXFCO0lBQ3JCLHNCQUFzQjtJQUN0QixZQUFZO0lBQ1osZUFBZTtJQUNmLGFBQWE7SUFDYixrQkFBa0I7SUFDbEIsY0FBYztJQUNkLFdBQVc7RUFDYjs7RUFFQTtJQUNFLGNBQWM7SUFDZCx5QkFBeUI7RUFDM0I7O0VBRUE7SUFDRSx5QkFBeUI7SUFDekIsY0FBYztFQUNoQjs7RUFFQTtJQUNFLHFCQUFxQjtJQUNyQixnQkFBZ0I7SUFDaEIsWUFBWTtJQUNaLDRCQUE0QjtJQUM1Qix5QkFBeUI7SUFDekIsZ0JBQWdCO0lBQ2hCLGtCQUFrQjtJQUNsQixVQUFVO0lBQ1YsU0FBUztJQUNULGFBQWE7SUFDYixlQUFlO0lBQ2YsaUJBQWlCO0lBQ2pCLGtCQUFrQjtJQUNsQiwwQkFBMEI7RUFDNUI7O0VBRUE7R0FDQyxxQkFBcUI7R0FDckIsZUFBZTtHQUNmLG1CQUFtQjtFQUNwQjs7RUFFQTtJQUNFLFlBQVk7SUFDWix5QkFBeUI7RUFDM0I7O0VBRUE7SUFDRSxrQkFBa0I7SUFDbEIsV0FBVztJQUNYLFFBQVE7SUFDUix1QkFBdUI7SUFDdkIsZUFBZTtJQUNmLGlCQUFpQjtJQUNqQixTQUFTO0lBQ1QsMEJBQTBCO0VBQzVCOztFQUVBO0lBQ0UseUJBQXlCO0lBQ3pCLFlBQVk7RUFDZCIsInNvdXJjZXNDb250ZW50IjpbIi8qIFByb2R1Y3RzQ29tcG9uZW50J3MgcHJpdmF0ZSBDU1Mgc3R5bGVzICovXHJcbi5wcm9kdWN0cyB7XHJcbiAgICBtYXJnaW46IDAgMCAyZW0gMDtcclxuICAgIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTtcclxuICAgIHBhZGRpbmc6IDA7XHJcbiAgICB3aWR0aDogMTVlbTtcclxuICB9XHJcbiAgXHJcbiAgaW5wdXQge1xyXG4gICAgZGlzcGxheTogYmxvY2s7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIHBhZGRpbmc6IC41cmVtO1xyXG4gICAgbWFyZ2luOiAxcmVtIDA7XHJcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIH1cclxuICBcclxuICAucHJvZHVjdHMgbGkge1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIH1cclxuICBcclxuICAucHJvZHVjdHMgbGk6aG92ZXIge1xyXG4gICAgbGVmdDogLjFlbTtcclxuICB9XHJcbiAgXHJcbiAgLnByb2R1Y3RzIGEge1xyXG4gICAgY29sb3I6ICMzMzM7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjRUVFO1xyXG4gICAgbWFyZ2luOiAuNWVtO1xyXG4gICAgcGFkZGluZzogLjNlbSAwO1xyXG4gICAgaGVpZ2h0OiAxLjZlbTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgIGRpc3BsYXk6IGJsb2NrO1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgfVxyXG4gIFxyXG4gIC5wcm9kdWN0cyBhOmhvdmVyIHtcclxuICAgIGNvbG9yOiAjMmMzYTQxO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2U2ZTZlNjtcclxuICB9XHJcbiAgXHJcbiAgLnByb2R1Y3RzIGE6YWN0aXZlIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM1MjUyNTI7XHJcbiAgICBjb2xvcjogI2ZhZmFmYTtcclxuICB9XHJcbiAgXHJcbiAgLnByb2R1Y3RzIC5iYWRnZSB7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICBmb250LXNpemU6IHNtYWxsO1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gICAgcGFkZGluZzogMC44ZW0gMC43ZW0gMCAwLjdlbTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM0MDUwNjE7XHJcbiAgICBsaW5lLWhlaWdodDogMWVtO1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgbGVmdDogLTFweDtcclxuICAgIHRvcDogLTRweDtcclxuICAgIGhlaWdodDogMS44ZW07XHJcbiAgICBtaW4td2lkdGg6IDE2cHg7XHJcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcclxuICAgIG1hcmdpbi1yaWdodDogLjhlbTtcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweCAwIDAgNHB4O1xyXG4gIH1cclxuICBcclxuICAuYWRkLWJ1dHRvbiB7XHJcbiAgIHBhZGRpbmc6IC41cmVtIDEuNXJlbTtcclxuICAgZm9udC1zaXplOiAxcmVtO1xyXG4gICBtYXJnaW4tYm90dG9tOiAycmVtO1xyXG4gIH1cclxuICBcclxuICAuYWRkLWJ1dHRvbjpob3ZlciB7XHJcbiAgICBjb2xvcjogd2hpdGU7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNDI1NDVDO1xyXG4gIH1cclxuICBcclxuICBidXR0b24uZGVsZXRlIHtcclxuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgIGxlZnQ6IDIxMHB4O1xyXG4gICAgdG9wOiA1cHg7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB3aGl0ZTtcclxuICAgIGNvbG9yOiAgIzUyNTI1MjtcclxuICAgIGZvbnQtc2l6ZTogMS4xcmVtO1xyXG4gICAgbWFyZ2luOiAwO1xyXG4gICAgcGFkZGluZzogMXB4IDEwcHggM3B4IDEwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIGJ1dHRvbi5kZWxldGU6aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzUyNTI1MjtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICB9Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ctx_r3","ProductsComponent","constructor","productService","cartService","currentUserService","ngOnInit","getProducts","theUser","getCurrentUser","subscribe","curUser","id","isAdmin","products","addToCart","product","user","addProductToCart","add","name","trim","addProduct","push","delete","filter","h","deleteProduct","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\broke\\Desktop\\SWEN-261\\team-project-2225-swen-261-06-g-ritgaragesale\\estore-ui\\src\\app\\products\\products.component.html","C:\\Users\\broke\\Desktop\\SWEN-261\\team-project-2225-swen-261-06-g-ritgaragesale\\estore-ui\\src\\app\\products\\products.component.ts"],"sourcesContent":["<h2>My Products</h2>\r\n<div *ngIf=\"isAdmin\">\r\n    <label for=\"new-product\">Product name: </label>\r\n    <input id=\"new-product\" #productName />\r\n  \r\n    <!-- (click) passes input value to add() and then clears the input -->\r\n    <button type=\"button\" class=\"add-button\" (click)=\"add(productName.value); productName.value=''\">\r\n      Add product\r\n    </button>\r\n</div>\r\n<ul class=\"products\">\r\n    <li *ngFor=\"let product of products\">\r\n      <a routerLink=\"/detail/{{product.id}}\">\r\n        <span class=\"badge\">{{product.id}}</span> {{product.name}}\r\n      </a>\r\n      <button *ngIf=\"isAdmin\" type=\"button\" class=\"delete\" title=\"delete product\"\r\n  (click)=\"delete(product)\">x</button>\r\n  <button *ngIf=\"!isAdmin\" type=\"button\" class=\"add\" title=\"add to cart\"\r\n  (click)=\"addToCart(product)\">add to cart</button>\r\n    </li>\r\n  </ul>","import { Component, OnInit } from '@angular/core';\r\n\r\nimport { Product } from '../product';\r\nimport { ProductService } from '../product.service';\r\nimport { MessageService } from '../message.service';\r\nimport { CartService } from '../cart.service';\r\nimport { CurrentUserService } from '../currentUser.service';\r\nimport { User } from '../user';\r\n\r\n@Component({\r\n  selector: 'app-products',\r\n  templateUrl: './products.component.html',\r\n  styleUrls: ['./products.component.css']\r\n})\r\nexport class ProductsComponent implements OnInit {\r\n    products: Product[] = [];\r\n    isAdmin: boolean = false;\r\n  \r\n    constructor(\r\n      private productService: ProductService,\r\n      private cartService: CartService,\r\n      private currentUserService: CurrentUserService\r\n      ) { }\r\n  \r\n    ngOnInit(): void {\r\n      this.getProducts();\r\n      var theUser: User = null as unknown as User;\r\n        this.currentUserService.getCurrentUser().subscribe(curUser =>{\r\n            theUser = curUser;\r\n            if (theUser.id == 0){\r\n                this.isAdmin = true;\r\n            } else {\r\n                this.isAdmin = false;\r\n            }\r\n        });\r\n    }\r\n  \r\n    getProducts(): void {\r\n      this.productService.getProducts()\r\n      .subscribe(products => this.products = products);\r\n    }\r\n\r\n    addToCart(product: Product): void {\r\n      this.currentUserService.getCurrentUser().subscribe((user) => {\r\n            this.cartService.addProductToCart(user.id,product).subscribe();\r\n            this.ngOnInit();\r\n      });\r\n  }\r\n\r\n    add(name: string): void {\r\n        name = name.trim();\r\n        if (!name) { return; }\r\n        this.productService.addProduct({ name } as Product)\r\n          .subscribe(product => {\r\n            this.products.push(product);\r\n          });\r\n      }\r\n\r\n    delete(product: Product): void {\r\n        this.products = this.products.filter(h => h !== product);\r\n        this.productService.deleteProduct(product.id).subscribe();\r\n    }\r\n  }"]},"metadata":{},"sourceType":"module","externalDependencies":[]}